-- Variables
local player = game.Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TeleportService = game:GetService("TeleportService")

-- Create GUI for Auto Execute Button
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")
screenGui.Name = "AutoExecuteGui"

local button = Instance.new("TextButton")
button.Parent = screenGui
button.Size = UDim2.new(0, 200, 0, 50)
button.Position = UDim2.new(0.5, -100, 0.8, -25)
button.Text = "Auto Execute"
button.BackgroundColor3 = Color3.fromRGB(0, 255, 0)

-- Function to check if a chest is collectible
local function isChest(chest)
    return chest.Name == "Chest" and chest:FindFirstChild("HumanoidRootPart")
end

-- Function to collect chests
local function collectChest(chest)
    if isChest(chest) then
        player.Character:MoveTo(chest.HumanoidRootPart.Position) -- Move to the chest's position
        wait(1) -- Give time for collection animation (adjust if necessary)
        ReplicatedStorage:WaitForChild("ChestActions"):FireServer("Collect", chest)
        print("Collected chest: " .. chest.Name)
    end
end

-- Function to detect special objects
local function detectSpecialObject()
    for _, obj in pairs(game.Workspace:GetChildren()) do
        if obj.Name == "SpecialObject" then -- Replace with the name of the special object
            print("Special object found: " .. obj.Name)
            return obj
        end
    end
    return nil
end

-- Function to summon boss
local function summonBoss(object)
    if object then
        ReplicatedStorage:WaitForChild("BossActions"):FireServer("Summon", object)
        print("Boss summoned with: " .. object.Name)
    end
end

-- Function to switch servers
local function switchServer()
    print("Switching server...")
    local servers = {"<server_id_1>", "<server_id_2>", "<server_id_3>"} -- Replace with valid instance IDs
    local randomServer = servers[math.random(1, #servers)]
    TeleportService:TeleportToPlaceInstance(game.PlaceId, randomServer)
end

-- Main function to auto-collect chests and handle special objects
local function autoCollectChests()
    while true do
        local specialObject = detectSpecialObject()
        if specialObject then
            summonBoss(specialObject) -- Summon boss if special object is found
            switchServer() -- Switch server after finding special object
            break
        end

        local chestsCollected = false
        for _, chest in pairs(game.Workspace:GetChildren()) do
            if isChest(chest) then
                collectChest(chest)
                chestsCollected = true
            end
        end

        if not chestsCollected then
            print("All chests collected, switching server...")
            switchServer() -- Switch server if all chests are collected
            break
        end

        wait(5) -- Wait before scanning again (adjust if needed)
    end
end

-- Connect button to start the process
button.MouseButton1Click:Connect(function()
    print("Auto Execute Activated!")
    autoCollectChests()
end)
